# AWS Security: Restrict EC2 Access based on Tags üè∑ - ABAC

Attribute-based access control (ABAC) is an authorization strategy that defines permissions based on attributes. In AWS, these attributes are called tags. ABAC allows you the same fine grained access control model like "Role Based Access Control-RBAC", in addition to that you can easily scale your permissions to any number of resources, identities. _[Read More](https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html)_

![Attribute-based access control](images/miztiik_github_attribute_based_access_control.png)

Follow this article in **[Youtube](https://www.youtube.com/c/ValaxyTechnologies)**

Our customer has a team of unicorns. They are working on two projects `projectRed` & `projectBlue`. The company has decided to reduce permissions overhead and at the same time restrict access to only resources from their own projects.

- `projectRed` members should be allowed access to resources with tag `projectName=projectRed` only and nothing else.
- `projectBlue` members should be allowed access to objects tagged `projectName=projectBlue` only and nothing else.

## Lab Setup

  You have couple of options to set this up in your account, You can use [AWS CDK](https://www.youtube.com/watch?v=MKwxpszw0Rc) or use the cloudformation template generated by CDK. All the necessary steps are baked into the templates, you can launch it and try it out.

### Method 1: Using AWS CDK

  If you have AWS CDK installed you can close this repository and deploy the stack with,

  ```sh
  git clone git@github.com:miztiik/attribute-based-access-control-ec2.git
  cd ./attribute-based-access-control-ec2
  source .env/bin/activate
  cdk deploy
  ```

### Buy me a coffee

Buy me a coffee ‚òï here `https://paypal.me/valaxy`, _or_ You can reach out to get more details through [here](https://youtube.com/c/valaxytechnologies/about).

#### References

1. [IAM policy tags to restrict Access](https://aws.amazon.com/premiumsupport/knowledge-center/iam-policy-tags-restrict/)

1. [Working Backwards: Tags for your AWS resources](https://aws.amazon.com/blogs/security/working-backward-from-iam-policies-and-principal-tags-to-standardized-names-and-tags-for-your-aws-resources/)
1. [Example Policies EC2 ](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policies-ec2-console.html)
1. [Specifying Conditions in a S3 Policy](https://docs.aws.amazon.com/AmazonS3/latest/dev/amazon-s3-policy-keys.html#bucket-keys-in-amazon-s3-policies)
1. [AWS Services That Work with IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html)

### Metadata

**Level**: 200
